(this["webpackJsonpultraman-lienquan"]=this["webpackJsonpultraman-lienquan"]||[]).push([[0],{89:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var i=a(12),r=a.n(i),n=a(14),s=a(6),c=a(11),l=a(0),o=(a(89),a(4)),b=function e(){Object(o.a)(this,e)};b.CAMERA_WIDTH=4,b.CAMERA_HEIGHT=8,b.GAP=1,b.GRAVITY=20,b.PLAYER_WIDTH=.2,b.PLAYER_HEIGHT=.2,b.PLAYER_SCALE=5,b.JUMP_FORCE=-10,b.RUN_FORCE=2,b.STAR_SIZE=.2,b.TRANSITION_DURATION=1.5,b.ALIEN_SPAWNING_TIME=.5,b.ALIEN_WIDTH=1.3,b.ALIEN_SPEED=1.5*b.CAMERA_WIDTH,b.ALIEN_YS=[b.CAMERA_HEIGHT/2-(b.ALIEN_HEIGHT=b.ALIEN_WIDTH/160*113)/2,b.CAMERA_WIDTH/3-b.ALIEN_HEIGHT/2,b.CAMERA_HEIGHT/1.5-b.ALIEN_HEIGHT/2],b.TOTAL_BLOCK_HEIGHT=15,b.BLOCK_BLOCK_SIZE=2.1*b.CAMERA_WIDTH,b.BLOCK_SIZE=b.CAMERA_HEIGHT/b.TOTAL_BLOCK_HEIGHT,b.BLOCK_OFFSET_Y=b.CAMERA_HEIGHT/1.7;var h,u,p,y,j,O,d,v,f,g,m,A,I,w,E,S,_,T,C,H,x,R,L,M,P,k,D,G,W,z,B,F,N,Y,K,Z,U,J,V,q,Q,X,$,ee,te,ae,ie,re,ne,se,ce,le,oe,be,he,ue,pe,ye,je,Oe,de,ve,fe,ge,me,Ae,Ie,we,Ee,Se,_e,Te,Ce,He,xe,Re,Le,Me,Pe,ke,De,Ge,We,ze,Be,Fe,Ne,Ye,Ke,Ze,Ue,Je,Ve,qe,Qe,Xe,$e,et,tt,at,it,rt,nt,st,ct,lt,ot,bt,ht,ut,pt,yt,jt,Ot,dt,vt,ft,gt,mt,At,It,wt,Et,St,_t,Tt,Ct,Ht,xt=a(2),Rt=a(5),Lt=a(1),Mt=a(8),Pt=a(7),kt=a(3),Dt=(a(13),h=Object(l.Inject)("physicsWorld"),u=function(e){Object(Mt.a)(a,e);var t=Object(Pt.a)(a);function a(){var e;Object(o.a)(this,a);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r)),Object(xt.a)(e,"physicsWorld",p,Object(Lt.a)(e)),e}return Object(Rt.a)(a,[{key:"process",value:function(){this.physicsWorld.Step(this.world.delta,8,3)}}]),a}(l.System),p=Object(kt.a)(u.prototype,"physicsWorld",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u),Gt=(y=Object(l.Inject)("viewport"),j=Object(l.Inject)("playerPosition"),O=function(e){Object(Mt.a)(a,e);var t=Object(Pt.a)(a);function a(){var e;Object(o.a)(this,a);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r)),Object(xt.a)(e,"viewport",d,Object(Lt.a)(e)),Object(xt.a)(e,"playerPos",v,Object(Lt.a)(e)),e}return Object(Rt.a)(a,[{key:"process",value:function(){var e=this.viewport.getCamera().getPosition();this.viewport.getCamera().setPosition(this.playerPos.x-b.GAP,e.y)}}]),a}(l.System),d=Object(kt.a)(O.prototype,"viewport",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=Object(kt.a)(O.prototype,"playerPos",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O),Wt=a(10),zt=a(9),Bt=(f=Object(l.Inject)("viewport"),g=Object(l.Inject)("physicsWorld"),m=Object(l.Inject)("blocks"),A=Object(l.Inject)("stars"),I=Object(l.Inject)("aliens"),w=Object(l.Inject)("playerPosition"),L=R=function(e){Object(Mt.a)(a,e);var t=Object(Pt.a)(a);function a(){var e;Object(o.a)(this,a);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).generatedStep=0,Object(xt.a)(e,"viewport",S,Object(Lt.a)(e)),Object(xt.a)(e,"physicsWorld",_,Object(Lt.a)(e)),Object(xt.a)(e,"blocks",T,Object(Lt.a)(e)),Object(xt.a)(e,"stars",C,Object(Lt.a)(e)),Object(xt.a)(e,"aliens",H,Object(Lt.a)(e)),Object(xt.a)(e,"playerPos",x,Object(Lt.a)(e)),e}return Object(Rt.a)(a,[{key:"createBox",value:function(e,t,a,i,r){var n=new c.b2BodyDef;n.type=c.b2BodyType.b2_staticBody,n.position.Set(e,t);var s=this.physicsWorld.CreateBody(n);s.SetUserData({type:"block"});var l=new c.b2PolygonShape;l.SetAsBox(a/2,i/2),s.CreateFixture(l),this.blocks.push({x:e,y:t,w:a,h:i,type:r,body:s})}},{key:"initialized",value:function(){for(;this.generatedStep<2;)this.generateBlocks(this.generatedStep*b.BLOCK_BLOCK_SIZE,!0),this.generatedStep++}},{key:"process",value:function(){for(var e=this.viewport.getCamera().getPosition(),t=Math.floor(e.x/b.BLOCK_BLOCK_SIZE);this.generatedStep<=t+1;)this.generateBlocks(this.generatedStep*b.BLOCK_BLOCK_SIZE),this.generatedStep++}},{key:"createStar",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new c.b2BodyDef;i.type=c.b2BodyType.b2_staticBody,i.position.Set(e,t);var r=this.physicsWorld.CreateBody(i);r.SetUserData({type:"star"});var n=new c.b2FixtureDef;n.isSensor=!0;var s=new c.b2PolygonShape;s.SetAsBox(b.STAR_SIZE,b.STAR_SIZE),n.shape=s,r.CreateFixture(n);var l={x:e,y:t,body:r,active:!0,special:a};r.m_userData.starObject=l,this.stars.push(l)}},{key:"generateBlocks",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=i?0:Math.floor(Math.random()*(a.patterns.length-1))+1,n=a.starPatterns[r]||[],s=a.patterns[r],c=Object(zt.a)(s);try{for(c.s();!(t=c.n()).done;){var l=t.value,o=Object(Wt.a)(l,2),h=o[0],u=o[1];this.createBox(e+b.BLOCK_SIZE*h,(b.TOTAL_BLOCK_HEIGHT-u)*b.BLOCK_SIZE,b.BLOCK_SIZE,b.BLOCK_SIZE,Math.floor(3*Math.random()))}}catch(A){c.e(A)}finally{c.f()}var p,y=!1,j=Object(zt.a)(n);try{for(j.s();!(p=j.n()).done;){var O=p.value,d=Object(Wt.a)(O,2),v=d[0],f=d[1],g=!y&&Math.random()<=.1;g&&(y=!0),this.createStar(e+b.BLOCK_SIZE*v,(b.TOTAL_BLOCK_HEIGHT-f)*b.BLOCK_SIZE,g)}}catch(A){j.e(A)}finally{j.f()}if(!i&&Math.random()<1){var m=Math.floor(3*Math.random());this.aliens.push({x:b.CAMERA_WIDTH-b.ALIEN_WIDTH,y:this.playerPos.y-b.ALIEN_HEIGHT/2,type:m,time:b.ALIEN_SPAWNING_TIME,hit:!1})}}}]),a}(l.System),R.patterns=["1-10,2","1-4,2;6-9,2;4,3-5;5,4;5,8-10;6,7-10;7,7-8","1-9,2;3,3-5;6-8,3;6-7,4","1-9,2;4,5-8;2,11;6,11;2-6,12;2-6,13","1-5,2;8-12,2;3-5,3;8-10,3;4-5,4;8-9,4;5-8,5;2-8,11;3-7,12;4-6,13","1-5,2;8-12,2;4-5,3;8-9,3;4-5,4;8-9,4","1-14,2;4-10,5;4-10,6;4,7;10,7;7,9-12","1-14,2;4-5,3;9-11,3;4,4;10,4;5-6,10;4-11,11;4-11,12"].map((function(e){var t,a=[],i=e.split(";"),r=Object(zt.a)(i);try{for(r.s();!(t=r.n()).done;){var n=t.value.split(","),s=Object(Wt.a)(n,2),c=s[0],l=s[1],o=c.split("-").map((function(e){return parseInt(e)})),b=l.split("-").map((function(e){return parseInt(e)}));if(2===o.length){for(var h=[],u=o[0];u<=o[1];u++)h.push(u);o=h}if(2===b.length){for(var p=[],y=b[0];y<=b[1];y++)p.push(y);b=p}var j,O=Object(zt.a)(o);try{for(O.s();!(j=O.n()).done;){var d,v=j.value,f=Object(zt.a)(b);try{for(f.s();!(d=f.n()).done;){var g=d.value;a.push([v,g])}}catch(m){f.e(m)}finally{f.f()}}}catch(m){O.e(m)}finally{O.f()}}}catch(m){r.e(m)}finally{r.f()}return a})),R.starPatterns=[void 0,"2.5,6.5;3,7.2;3.5,7.9;3.8,9.2;3.9,10.2;4,11.2;4.2,12.2;5.2,12.6;6.1,12.2;6.2,11.3","2.2,6.8;2.8,7.5;3.2,8.1;5.5,6.8;5.9,7.5;6.3,8.3;6.7,9.1","2.5,7.8;2.9,8.5;3.2,9.2;4,9.6;4.8,9.6;5.5,9","2.9,6.5;3.2,7.2;4,7.9;4.8,7.4;5.2,6.5;6.2,6.5;7.2,6.5;8.2,6.5","3.2,6.5;3.5,7;4,7.5;4.8,7.3;5.3,6.5;6.5,8;7,9;8,9;8.5,8;8.8,7.5;9,6.5;9.1,6","4.5,9;5.5,7.5;6.5,7.5;7.5,7.5;8.5,7.5;9.5,8;10.5,9","4.5,5.5;5.5,5.5;5.5,4.5;6.5,4.5;6.5,3.5;8.5,7.5;9,8.5;10,8.5;10.3,7.5;10.5,5.5;11.5,5.5;11.5,4.5;12.5,4.5;12.5,3.5"].map((function(e){return e&&e.split(";").map((function(e){return e.split(",").map((function(e){return parseFloat(e)}))})).map((function(e){var t=Object(Wt.a)(e,2);return[t[0]-.5,t[1]]}))})),E=L,S=Object(kt.a)(E.prototype,"viewport",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=Object(kt.a)(E.prototype,"physicsWorld",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=Object(kt.a)(E.prototype,"blocks",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=Object(kt.a)(E.prototype,"stars",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=Object(kt.a)(E.prototype,"aliens",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=Object(kt.a)(E.prototype,"playerPos",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E),Ft=(M=Object(l.Inject)("viewport"),P=Object(l.Inject)("context"),k=Object(l.Inject)("blocks"),D=Object(l.Inject)("assetManager"),G=function(e){Object(Mt.a)(a,e);var t=Object(Pt.a)(a);function a(){var e;Object(o.a)(this,a);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r)),Object(xt.a)(e,"viewport",W,Object(Lt.a)(e)),Object(xt.a)(e,"gl",z,Object(Lt.a)(e)),Object(xt.a)(e,"blocks",B,Object(Lt.a)(e)),Object(xt.a)(e,"assetManager",F,Object(Lt.a)(e)),e.batch=void 0,e.whiteTex=void 0,e.atlas=void 0,e.regions=void 0,e}return Object(Rt.a)(a,[{key:"initialized",value:function(){this.batch=Object(s.f)(this.gl),this.whiteTex=Object(s.l)(this.gl);var e=this.assetManager.getAtlas("./ground.atlas");e&&(this.atlas=e,this.regions=e.findRegions("tile"))}},{key:"process",value:function(){this.batch.setProjection(this.viewport.getCamera().combined),this.batch.begin();var e,t=Object(zt.a)(this.blocks);try{for(t.s();!(e=t.n()).done;){var a=e.value,i=a.x,r=a.y,n=a.w,s=a.h,c=a.type;this.regions[c].draw(this.batch,i-n/2,r-s/2,n,s)}}catch(l){t.e(l)}finally{t.f()}this.batch.end()}}]),a}(l.System),W=Object(kt.a)(G.prototype,"viewport",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=Object(kt.a)(G.prototype,"gl",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=Object(kt.a)(G.prototype,"blocks",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=Object(kt.a)(G.prototype,"assetManager",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G),Nt=(N=Object(l.Inject)("physicsWorld"),Y=Object(l.Inject)("playerPosition"),K=Object(l.Inject)("inputHandler"),Z=Object(l.Inject)("playerState"),U=Object(l.Inject)("eventEmitter"),J=function(e){Object(Mt.a)(a,e);var t=Object(Pt.a)(a);function a(){var e;Object(o.a)(this,a);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r)),Object(xt.a)(e,"physicsWorld",V,Object(Lt.a)(e)),Object(xt.a)(e,"playerPos",q,Object(Lt.a)(e)),Object(xt.a)(e,"inputHandler",Q,Object(Lt.a)(e)),Object(xt.a)(e,"playerState",X,Object(Lt.a)(e)),Object(xt.a)(e,"eventEmitter",$,Object(Lt.a)(e)),e.playerBody=void 0,e.pressed=!1,e.jumpLeft=0,e.gameOver=!1,e.zeroCenter={x:0,y:0},e.runImpulse={x:b.RUN_FORCE,y:0},e.jumpImpulse={x:0,y:b.JUMP_FORCE},e}return Object(Rt.a)(a,[{key:"initialized",value:function(){var e=new c.b2BodyDef;e.type=c.b2BodyType.b2_dynamicBody,e.fixedRotation=!0,e.position.Set(2,b.CAMERA_HEIGHT/2);var t=this.physicsWorld.CreateBody(e);t.SetUserData({type:"user"});var a=new c.b2CircleShape(b.PLAYER_WIDTH);a.Set({x:-b.PLAYER_WIDTH/2,y:-b.PLAYER_HEIGHT/2},b.PLAYER_WIDTH),t.CreateFixture(a);var i=new c.b2PolygonShape;i.SetAsBox(b.PLAYER_WIDTH/8,b.PLAYER_WIDTH/8,{x:0,y:b.PLAYER_HEIGHT/2});var r=new c.b2FixtureDef;r.isSensor=!0,r.shape=i,r.userData={type:"playerSensor"},t.CreateFixture(r);var n=new c.b2PolygonShape;n.SetAsBox(b.PLAYER_WIDTH/8,b.PLAYER_WIDTH/8,{x:b.PLAYER_WIDTH/2,y:0});var s=new c.b2FixtureDef;s.isSensor=!0,s.shape=n,s.userData={type:"playerSensor2"},t.CreateFixture(s),this.playerBody=t;var l=function(e){Object(Mt.a)(a,e);var t=Object(Pt.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this)).movementSytem=void 0,i.movementSytem=e,i}return Object(Rt.a)(a,[{key:"processJumpable",value:function(e){var t,a,i,r,n=e.GetFixtureA(),s=e.GetFixtureB();n.IsSensor()&&"playerSensor"===(null===(t=n.GetUserData())||void 0===t?void 0:t.type)?r=s:s.IsSensor()&&"playerSensor"===(null===(a=s.GetUserData())||void 0===a?void 0:a.type)&&(r=n),r&&"block"===(null===(i=r.GetBody().GetUserData())||void 0===i?void 0:i.type)&&(this.movementSytem.jumpLeft=2,this.movementSytem.playerState.changeAction("run"))}},{key:"processObstacle",value:function(e){var t,a,i,r,n=e.GetFixtureA(),s=e.GetFixtureB();n.IsSensor()&&"playerSensor2"===(null===(t=n.GetUserData())||void 0===t?void 0:t.type)?r=s:s.IsSensor()&&"playerSensor2"===(null===(a=s.GetUserData())||void 0===a?void 0:a.type)&&(r=n),r&&"block"===(null===(i=r.GetBody().GetUserData())||void 0===i?void 0:i.type)&&(this.movementSytem.playerState.stunnedDuration=.2,this.movementSytem.playerState.changeAction("hurt"))}},{key:"BeginContact",value:function(e){this.movementSytem.gameOver||(this.processJumpable(e),this.processObstacle(e),this.movementSytem.eventEmitter.emit("beginContact",e))}}]),a}(c.b2ContactListener);this.physicsWorld.SetContactListener(new l(this))}},{key:"process",value:function(){if(this.playerState.stunnedDuration>0)this.playerState.appliedStun||(this.playerState.appliedStun=!0,this.playerBody.GetLinearVelocity().Set(0,0),this.playerBody.ApplyLinearImpulse({x:-2*b.RUN_FORCE,y:0},{x:0,y:0})),this.playerState.stunnedDuration-=this.world.delta,this.playerState.stunnedDuration<=0&&(this.playerState.changeAction("run"),this.playerState.appliedStun=!1);else{var e=this.playerBody.GetLinearVelocity();if(e.Set(0,e.y),this.playerBody.ApplyLinearImpulse(this.runImpulse,this.zeroCenter),this.pressed)this.inputHandler.isTouched()||(this.pressed=!1);else if(this.inputHandler.isTouched()&&this.jumpLeft>0){this.jumpLeft--,1===this.jumpLeft?this.playerState.changeAction("jump"):this.playerState.changeAction("doubleJump"),this.pressed=!0;var t=this.playerBody.GetLinearVelocity();t.Set(t.x,0),this.playerBody.ApplyLinearImpulse(this.jumpImpulse,this.zeroCenter)}}var a=this.playerBody.GetPosition();this.playerPos.set(a.x,a.y),!this.gameOver&&(a.y>1.2*b.CAMERA_HEIGHT||this.playerState.hp<=0||this.playerState.complete)&&(this.gameOver=!0,this.eventEmitter.emit("gameOver"))}}]),a}(l.System),V=Object(kt.a)(J.prototype,"physicsWorld",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=Object(kt.a)(J.prototype,"playerPos",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=Object(kt.a)(J.prototype,"inputHandler",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=Object(kt.a)(J.prototype,"playerState",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=Object(kt.a)(J.prototype,"eventEmitter",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J),Yt=(ee=Object(l.Inject)("viewport"),te=Object(l.Inject)("context"),ae=Object(l.Inject)("playerPosition"),ie=Object(l.Inject)("assetManager"),re=Object(l.Inject)("playerState"),ne=function(e){Object(Mt.a)(a,e);var t=Object(Pt.a)(a);function a(){var e;Object(o.a)(this,a);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r)),Object(xt.a)(e,"viewport",se,Object(Lt.a)(e)),Object(xt.a)(e,"gl",ce,Object(Lt.a)(e)),Object(xt.a)(e,"playerPos",le,Object(Lt.a)(e)),Object(xt.a)(e,"assetManager",oe,Object(Lt.a)(e)),Object(xt.a)(e,"playerState",be,Object(Lt.a)(e)),e.batch=void 0,e.whiteTex=void 0,e.atlas=void 0,e.animations={},e.animationFrameDuration={run:.1,jump:.1,doubleJump:.1,hurt:.05},e}return Object(Rt.a)(a,[{key:"initialized",value:function(){this.batch=Object(s.f)(this.gl),this.whiteTex=Object(s.l)(this.gl);var e=this.assetManager.getAtlas("./main-char.atlas");e&&(this.atlas=e,this.animations.upgrade=Object(s.e)(.08,e.findRegions("upgrade_blast")))}},{key:"getAnimation",value:function(e,t){var a="".concat(e).concat(t);if(!this.animations[a]){var i=this.animationFrameDuration[e]||.1,r=this.atlas.findRegions(a);"jump"!==e&&"doubleJump"!==e||(r=r.slice(0,r.length-2)),this.animations[a]=Object(s.e)(i,r)}return this.animations[a]}},{key:"process",value:function(){this.batch.setProjection(this.viewport.getCamera().combined),this.batch.begin();var e=this.playerPos,t=e.x,a=e.y;this.playerState.process(this.world.delta);var i=s.b.LOOP;("jump"!==this.playerState.action&&"doubleJump"!==this.playerState.action||(i=s.b.NORMAL),this.getAnimation(this.playerState.action,this.playerState.state).getKeyFrame(this.playerState.stateTime,i).draw(this.batch,t-b.PLAYER_WIDTH/2,a-b.PLAYER_HEIGHT/2,b.PLAYER_WIDTH,b.PLAYER_HEIGHT,b.PLAYER_WIDTH/2,b.PLAYER_HEIGHT,0,b.PLAYER_SCALE,b.PLAYER_SCALE),this.playerState.transitionTime>0)&&this.animations.upgrade.getKeyFrame(this.playerState.stateTime,s.b.LOOP).draw(this.batch,t-b.PLAYER_WIDTH/2,a,b.PLAYER_WIDTH,b.PLAYER_HEIGHT,b.PLAYER_WIDTH/2,b.PLAYER_HEIGHT,0,1.2*b.PLAYER_SCALE,1.2*b.PLAYER_SCALE);this.batch.end()}}]),a}(l.System),se=Object(kt.a)(ne.prototype,"viewport",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=Object(kt.a)(ne.prototype,"gl",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=Object(kt.a)(ne.prototype,"playerPos",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=Object(kt.a)(ne.prototype,"assetManager",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be=Object(kt.a)(ne.prototype,"playerState",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne),Kt=(he=Object(l.Inject)("viewport"),ue=Object(l.Inject)("physicsWorld"),pe=Object(l.Inject)("blocks"),ye=Object(l.Inject)("stars"),je=function(e){Object(Mt.a)(a,e);var t=Object(Pt.a)(a);function a(){var e;Object(o.a)(this,a);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r)),Object(xt.a)(e,"viewport",Oe,Object(Lt.a)(e)),Object(xt.a)(e,"physicsWorld",de,Object(Lt.a)(e)),Object(xt.a)(e,"blocks",ve,Object(Lt.a)(e)),Object(xt.a)(e,"stars",fe,Object(Lt.a)(e)),e}return Object(Rt.a)(a,[{key:"process",value:function(){for(var e=this.viewport.getCamera().getPosition(),t=this.blocks.length-1;t>=0;t--){var a=this.blocks[t];e.x-a.x>=3*b.CAMERA_WIDTH&&(this.physicsWorld.DestroyBody(a.body),this.blocks.splice(t,1))}for(var i=this.stars.length-1;i>=0;i--){var r=this.stars[i];e.x-r.x>=3*b.CAMERA_WIDTH&&(this.physicsWorld.DestroyBody(r.body),this.stars.splice(i,1))}}}]),a}(l.System),Oe=Object(kt.a)(je.prototype,"viewport",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=Object(kt.a)(je.prototype,"physicsWorld",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=Object(kt.a)(je.prototype,"blocks",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=Object(kt.a)(je.prototype,"stars",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),je),Zt=function(){function e(t){Object(o.a)(this,e),this.gl=void 0,this.promises=[],this.atlases=new Map,this.textures=new Map,this.done=0,this.fonts=new Map,this.gl=t}return Object(Rt.a)(e,[{key:"loadAtlas",value:function(e){var t=this,a=Object(s.m)(this.gl,e,{}).then((function(a){t.atlases.set(e,a),t.done++}));this.promises.push(a)}},{key:"loadFont",value:function(e){var t=this,a=Object(s.n)(this.gl,e,{}).then((function(a){t.fonts.set(e,a),t.done++}));this.promises.push(a)}},{key:"getFont",value:function(e){return this.fonts.get(e)}},{key:"getAtlas",value:function(e){return this.atlases.get(e)}},{key:"loadTexture",value:function(e){var t=this,a=Object(s.o)(this.gl,e,{}).then((function(a){t.textures.set(e,a),t.done++}));this.promises.push(a)}},{key:"getTexture",value:function(e){return this.textures.get(e)}},{key:"finishLoading",value:function(){var e=Object(n.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.promises);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDone",value:function(){return this.done}},{key:"getTotal",value:function(){return this.promises.length}}]),e}(),Ut=function(){function e(){Object(o.a)(this,e),this.action="run",this.state="A",this.stateTime=0,this.states=["A","B","B","C","C","D"],this.stateIndex=0,this.transitionTime=0,this.stunnedDuration=0,this.appliedStun=!1,this.hp=3,this.score=0,this.complete=!1}return Object(Rt.a)(e,[{key:"getCurrentStateIndex",value:function(){return this.stateIndex}},{key:"changeAction",value:function(e){e!==this.action&&(this.action=e,this.stateTime=0)}},{key:"changeState",value:function(e){this.transitionTime=b.TRANSITION_DURATION,this.state=e}},{key:"nextState",value:function(){var e=this.stateIndex+1;e>=this.states.length?this.complete=!0:(this.stateIndex=e,this.changeState(this.states[e]))}},{key:"process",value:function(e){this.stateTime+=e,this.transitionTime>0&&(this.transitionTime-=e)}}]),e}(),Jt=(ge=Object(l.Inject)("context"),me=Object(l.Inject)("assetManager"),Ae=Object(l.Inject)("fixedCamera"),Ie=Object(l.Inject)("playerPosition"),we=function(e){Object(Mt.a)(a,e);var t=Object(Pt.a)(a);function a(){var e;Object(o.a)(this,a);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r)),Object(xt.a)(e,"gl",Ee,Object(Lt.a)(e)),Object(xt.a)(e,"assetManager",Se,Object(Lt.a)(e)),Object(xt.a)(e,"fixedCamera",_e,Object(Lt.a)(e)),Object(xt.a)(e,"playerPos",Te,Object(Lt.a)(e)),e.batch=void 0,e.textures=new Map,e}return Object(Rt.a)(a,[{key:"initialized",value:function(){var e=this;this.batch=Object(s.f)(this.gl),["bg","city_01","city_02","cloud_01","cloud_02","smoke_01","smoke_02"].map((function(t){return e.textures.set(t,e.assetManager.getTexture("./background/".concat(t,".png")))}))}},{key:"drawBackground",value:function(){for(var e=this.textures.get("bg"),t=b.CAMERA_HEIGHT,a=t/e.height*e.width,i=0;i*a<b.CAMERA_WIDTH;)this.batch.draw(e,i*a,0,a,t),i++}},{key:"process",value:function(){var e=-this.playerPos.x;this.batch.setProjection(this.fixedCamera.combined),this.batch.begin(),this.drawBackground(),this.drawCloud1(.5*e),this.drawCloud2(.8*e),this.drawCity1(e),this.drawCity2(1.1*e),this.batch.end()}},{key:"drawCity1",value:function(e){for(var t=this.textures.get("city_01"),a=b.CAMERA_HEIGHT/1.5,i=a/t.height*t.width;e<=0;)e+=i;for(this.batch.draw(t,e-i,b.CAMERA_HEIGHT-a,i,a);e<=b.CAMERA_WIDTH;)this.batch.draw(t,e,b.CAMERA_HEIGHT-a,i,a),e+=i}},{key:"drawCity2",value:function(e){for(var t=this.textures.get("city_02"),a=b.CAMERA_HEIGHT/1.5,i=a/t.height*t.width;e<=0;)e+=i;for(this.batch.draw(t,e-i,b.CAMERA_HEIGHT-a,i,a);e<=b.CAMERA_WIDTH;)this.batch.draw(t,e,b.CAMERA_HEIGHT-a,i,a),e+=i}},{key:"drawCloud1",value:function(e){for(var t=this.textures.get("cloud_01"),a=b.CAMERA_HEIGHT/1.2,i=a/t.height*t.width,r=i;e<=0;)e+=i+r;for(this.batch.draw(t,e-i,b.CAMERA_HEIGHT-a,i,a);e+r<=b.CAMERA_WIDTH;)this.batch.draw(t,e+r,b.CAMERA_HEIGHT-a,i,a),e+=i+r}},{key:"drawCloud2",value:function(e){for(var t=this.textures.get("cloud_02"),a=b.CAMERA_HEIGHT/6,i=a/t.height*t.width,r=i;e<=0;)e+=i+r;for(this.batch.draw(t,e-i,b.CAMERA_HEIGHT/4,i,a);e+r<=b.CAMERA_WIDTH;)this.batch.draw(t,e+r,b.CAMERA_HEIGHT/4,i,a),e+=i+r}}]),a}(l.System),Ee=Object(kt.a)(we.prototype,"gl",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=Object(kt.a)(we.prototype,"assetManager",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=Object(kt.a)(we.prototype,"fixedCamera",[Ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=Object(kt.a)(we.prototype,"playerPos",[Ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we),Vt=(Ce=Object(l.Inject)("context"),He=Object(l.Inject)("assetManager"),xe=Object(l.Inject)("fixedCamera"),Re=Object(l.Inject)("playerPosition"),Le=function(e){Object(Mt.a)(a,e);var t=Object(Pt.a)(a);function a(){var e;Object(o.a)(this,a);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r)),Object(xt.a)(e,"gl",Me,Object(Lt.a)(e)),Object(xt.a)(e,"assetManager",Pe,Object(Lt.a)(e)),Object(xt.a)(e,"fixedCamera",ke,Object(Lt.a)(e)),Object(xt.a)(e,"playerPos",De,Object(Lt.a)(e)),e.batch=void 0,e.textures=new Map,e}return Object(Rt.a)(a,[{key:"initialized",value:function(){var e=this;this.batch=Object(s.f)(this.gl),["bg","city_01","city_02","cloud_01","cloud_02","smoke_01","smoke_02"].map((function(t){return e.textures.set(t,e.assetManager.getTexture("./background/".concat(t,".png")))}))}},{key:"process",value:function(){var e=-this.playerPos.x;this.batch.setProjection(this.fixedCamera.combined),this.batch.begin(),this.drawCloud1(.6*e),this.drawCloud2(.1*e),this.batch.end()}},{key:"drawCloud1",value:function(e){for(var t=this.textures.get("smoke_01"),a=b.CAMERA_HEIGHT/5,i=a/t.height*t.width,r=-i/1.5;e<=0;)e+=i+r;for(this.batch.draw(t,e-i,b.CAMERA_HEIGHT-a/2,i,a);e+r<=b.CAMERA_WIDTH;)this.batch.draw(t,e+r,b.CAMERA_HEIGHT-a/2,i,a),e+=i+r}},{key:"drawCloud2",value:function(e){for(var t=this.textures.get("smoke_02"),a=b.CAMERA_HEIGHT/5,i=a/t.height*t.width,r=-i/1.5;e<=0;)e+=i+r;for(this.batch.draw(t,e-i,b.CAMERA_HEIGHT-a/2,i,a);e+r<=b.CAMERA_WIDTH;)this.batch.draw(t,e+r,b.CAMERA_HEIGHT-a/2,i,a),e+=i+r}}]),a}(l.System),Me=Object(kt.a)(Le.prototype,"gl",[Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=Object(kt.a)(Le.prototype,"assetManager",[He],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=Object(kt.a)(Le.prototype,"fixedCamera",[xe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De=Object(kt.a)(Le.prototype,"playerPos",[Re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Le),qt=a(24),Qt=(Ge=Object(l.Inject)("viewport"),We=Object(l.Inject)("context"),ze=Object(l.Inject)("stars"),Be=Object(l.Inject)("assetManager"),Fe=Object(l.Inject)("playerState"),Ne=function(e){Object(Mt.a)(a,e);var t=Object(Pt.a)(a);function a(){var e;Object(o.a)(this,a);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r)),Object(xt.a)(e,"viewport",Ye,Object(Lt.a)(e)),Object(xt.a)(e,"gl",Ke,Object(Lt.a)(e)),Object(xt.a)(e,"stars",Ze,Object(Lt.a)(e)),Object(xt.a)(e,"assetManager",Ue,Object(Lt.a)(e)),Object(xt.a)(e,"playerState",Je,Object(Lt.a)(e)),e.batch=void 0,e.whiteTex=void 0,e.starAnimation=void 0,e.specialAnimations=void 0,e.elapsed=0,e}return Object(Rt.a)(a,[{key:"initialized",value:function(){this.batch=Object(s.f)(this.gl),this.whiteTex=Object(s.l)(this.gl);var e=this.assetManager.getAtlas("./object.atlas");e&&(this.starAnimation=Object(s.e)(.2,e.findRegions("star")),this.specialAnimations=["hand","hand","feet","feet","chest","head"].map((function(t){return Object(s.e)(.2,e.findRegions(t))})))}},{key:"process",value:function(){this.batch.setProjection(this.viewport.getCamera().combined),this.batch.begin(),this.elapsed+=this.world.delta;var e,t=Object(zt.a)(this.stars);try{for(t.s();!(e=t.n()).done;){var a=e.value,i=a.x,r=a.y,n=a.active,c=a.special;n&&(c?this.specialAnimations[this.playerState.getCurrentStateIndex()].getKeyFrame(this.elapsed,s.b.LOOP).draw(this.batch,i-b.STAR_SIZE/2,r-b.STAR_SIZE/2,b.STAR_SIZE,b.STAR_SIZE,b.STAR_SIZE/2,b.STAR_SIZE/2,0,2,2):this.starAnimation.getKeyFrame(this.elapsed,s.b.LOOP).draw(this.batch,i-b.STAR_SIZE/2,r-b.STAR_SIZE/2,b.STAR_SIZE,b.STAR_SIZE))}}catch(l){t.e(l)}finally{t.f()}this.batch.end()}}]),a}(l.System),Ye=Object(kt.a)(Ne.prototype,"viewport",[Ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ke=Object(kt.a)(Ne.prototype,"gl",[We],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ze=Object(kt.a)(Ne.prototype,"stars",[ze],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=Object(kt.a)(Ne.prototype,"assetManager",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Je=Object(kt.a)(Ne.prototype,"playerState",[Fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ne),Xt=(Ve=Object(l.Inject)("physicsWorld"),qe=Object(l.Inject)("stars"),Qe=Object(l.Inject)("eventEmitter"),Xe=Object(l.Inject)("playerState"),$e=function(e){Object(Mt.a)(a,e);var t=Object(Pt.a)(a);function a(){var e;Object(o.a)(this,a);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r)),Object(xt.a)(e,"physicsWorld",et,Object(Lt.a)(e)),Object(xt.a)(e,"stars",tt,Object(Lt.a)(e)),Object(xt.a)(e,"eventEmitter",at,Object(Lt.a)(e)),Object(xt.a)(e,"playerState",it,Object(Lt.a)(e)),e.subscription=void 0,e}return Object(Rt.a)(a,[{key:"initialized",value:function(){var e=this;this.subscription=this.eventEmitter.addListener("beginContact",(function(t){var a,i,r,n,s,c=t.GetFixtureA(),l=t.GetFixtureB();"star"===(null===(a=c.GetBody().GetUserData())||void 0===a?void 0:a.type)?(n=l,s=c):"star"===(null===(i=c.GetBody().GetUserData())||void 0===i?void 0:i.type)&&(n=c,s=l),s&&n&&"user"===(null===(r=n.GetBody().GetUserData())||void 0===r?void 0:r.type)&&e.removeStar(s.GetBody().GetUserData().starObject)}))}},{key:"process",value:function(){}},{key:"removeStar",value:function(e){e.active&&(e.special?this.playerState.nextState():this.playerState.score+=100,e.active=!1)}},{key:"dispose",value:function(){this.subscription.remove()}}]),a}(l.System),et=Object(kt.a)($e.prototype,"physicsWorld",[Ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=Object(kt.a)($e.prototype,"stars",[qe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),at=Object(kt.a)($e.prototype,"eventEmitter",[Qe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it=Object(kt.a)($e.prototype,"playerState",[Xe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$e),$t=(rt=Object(l.Inject)("aliens"),nt=Object(l.Inject)("playerPosition"),st=Object(l.Inject)("playerState"),ct=Object(l.Inject)("eventEmitter"),lt=function(e){Object(Mt.a)(a,e);var t=Object(Pt.a)(a);function a(){var e;Object(o.a)(this,a);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r)),Object(xt.a)(e,"aliens",ot,Object(Lt.a)(e)),Object(xt.a)(e,"playerPos",bt,Object(Lt.a)(e)),Object(xt.a)(e,"playerState",ht,Object(Lt.a)(e)),Object(xt.a)(e,"eventEmitter",ut,Object(Lt.a)(e)),e}return Object(Rt.a)(a,[{key:"process",value:function(){for(var e=this.aliens.length-1;e>=0;e--){var t=this.aliens[e];if(t.time>0)return void(t.time-=this.world.delta);if(!t.hit){var a=this.playerPos.y;t.x<=b.GAP&&t.x+b.ALIEN_WIDTH>=b.GAP&&t.y<=a&&t.y+b.ALIEN_HEIGHT>=a&&(this.playerState.stunnedDuration=.3,this.playerState.changeAction("hurt"),this.playerState.hp--,t.hit=!0)}t.x-=b.ALIEN_SPEED*this.world.delta,t.x<=-b.ALIEN_WIDTH&&this.aliens.splice(e,1)}}}]),a}(l.System),ot=Object(kt.a)(lt.prototype,"aliens",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bt=Object(kt.a)(lt.prototype,"playerPos",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ht=Object(kt.a)(lt.prototype,"playerState",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ut=Object(kt.a)(lt.prototype,"eventEmitter",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lt),ea=(pt=Object(l.Inject)("aliens"),yt=Object(l.Inject)("fixedCamera"),jt=Object(l.Inject)("context"),Ot=Object(l.Inject)("assetManager"),dt=function(e){Object(Mt.a)(a,e);var t=Object(Pt.a)(a);function a(){var e;Object(o.a)(this,a);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r)),Object(xt.a)(e,"aliens",vt,Object(Lt.a)(e)),Object(xt.a)(e,"fixedCamera",ft,Object(Lt.a)(e)),Object(xt.a)(e,"gl",gt,Object(Lt.a)(e)),Object(xt.a)(e,"assetManager",mt,Object(Lt.a)(e)),e.batch=void 0,e.animations=[],e.elapsed=0,e}return Object(Rt.a)(a,[{key:"initialized",value:function(){var e=this;this.batch=Object(s.f)(this.gl);var t=this.assetManager.getAtlas("./main-char.atlas");t&&["alien1","alien2","alien3"].forEach((function(a){return e.animations.push(Object(s.e)(.4,t.findRegions(a)))}))}},{key:"process",value:function(){this.batch.setProjection(this.fixedCamera.combined),this.batch.begin(),this.elapsed+=this.world.delta;var e,t=Object(zt.a)(this.aliens);try{for(t.s();!(e=t.n()).done;){var a=e.value;this.animations[a.type].getKeyFrame(b.ALIEN_SPAWNING_TIME-a.time,s.b.NORMAL).draw(this.batch,a.x,a.y,b.ALIEN_WIDTH,b.ALIEN_HEIGHT)}}catch(i){t.e(i)}finally{t.f()}this.batch.end()}}]),a}(l.System),vt=Object(kt.a)(dt.prototype,"aliens",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ft=Object(kt.a)(dt.prototype,"fixedCamera",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gt=Object(kt.a)(dt.prototype,"gl",[jt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mt=Object(kt.a)(dt.prototype,"assetManager",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dt),ta=(At=Object(l.Inject)("fixedCamera"),It=Object(l.Inject)("context"),wt=Object(l.Inject)("assetManager"),Et=Object(l.Inject)("playerState"),St=function(e){Object(Mt.a)(a,e);var t=Object(Pt.a)(a);function a(){var e;Object(o.a)(this,a);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r)),Object(xt.a)(e,"fixedCamera",_t,Object(Lt.a)(e)),Object(xt.a)(e,"gl",Tt,Object(Lt.a)(e)),Object(xt.a)(e,"assetManager",Ct,Object(Lt.a)(e)),Object(xt.a)(e,"playerState",Ht,Object(Lt.a)(e)),e.batch=void 0,e.panel=void 0,e.heartFull=void 0,e.heartEmpty=void 0,e.bar=void 0,e.scoreLabel=void 0,e.text=void 0,e.whiteText=void 0,e}return Object(Rt.a)(a,[{key:"initialized",value:function(){this.batch=Object(s.f)(this.gl);var e=this.assetManager.getAtlas("./ui.atlas");this.panel=e.findRegions("panel")[0],this.heartFull=e.findRegions("heart-full")[0],this.heartEmpty=e.findRegions("heart-empty")[0],this.bar=e.findRegions("bar")[0],this.scoreLabel=e.findRegions("score-label")[0];var t=this.assetManager.getFont("./score.fnt");this.text=t.createRenderer(.35*b.CAMERA_WIDTH),this.text.setAlignMode(s.a.right),this.whiteText=Object(s.l)(this.gl)}},{key:"process",value:function(){this.batch.setProjection(this.fixedCamera.combined),this.batch.begin();var e=this.panel,t=e.width,a=e.height,i=.95*b.CAMERA_WIDTH,r=i/t*a,n=.025*b.CAMERA_WIDTH,s=.05*b.CAMERA_WIDTH;this.panel.draw(this.batch,n,s,i,r);for(var c=this.heartFull,l=i/26,o=l/c.width*c.height,h=2*l,u=s+r-1.75*o,p=.2*l,y=0;y<3;y++)y<this.playerState.hp?this.heartFull.draw(this.batch,h+(l+p)*y,u,l,o):this.heartEmpty.draw(this.batch,h+(l+p)*y,u,l,o);var j=this.bar,O=h,d=i-2*(O-n),v=d/j.width*j.height,f=s+r/1.7-v;this.bar.draw(this.batch,O,f,d,v);var g=this.scoreLabel,m=g.width,A=.8*o,I=A/g.height*m,w=u+o-A,E=h+10*l;this.scoreLabel.draw(this.batch,E,w,I,A);var S=1.35*o,_=w+A-S;this.text.setDisplayWidth(i-3*l),this.text.draw(this.batch,function(e,t){for(var a="".concat(e);a.length<t;)a="0".concat(a);return a}(this.playerState.score,10),n,_,S);var T=O,C=d/250,H=d/6-C,x=f+v;this.batch.setColor(0,0,0,1);for(var R=0;R<6;R++)if(R>=this.playerState.stateIndex){var L=v*(1-.12*(5-R));this.batch.draw(this.whiteText,T+R*(C+H),x-L,H,L)}this.batch.setColor(1,1,1,1),this.batch.end()}}]),a}(l.System),_t=Object(kt.a)(St.prototype,"fixedCamera",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tt=Object(kt.a)(St.prototype,"gl",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ct=Object(kt.a)(St.prototype,"assetManager",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ht=Object(kt.a)(St.prototype,"playerState",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St);(function(){var e=Object(n.a)(r.a.mark((function e(){var t,a,i,n,o,h,u,p,y,j,O,d,v;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new qt.EventEmitter,a=Object(s.i)(),i=a.getCanvas(),n=a.getInfo(),o=Object(s.j)(i,b.CAMERA_WIDTH,b.CAMERA_HEIGHT,{pixelRatio:1}),h=o.getContext(),u=Object(s.k)(i,o),p=Object(s.h)(b.CAMERA_WIDTH,b.CAMERA_HEIGHT,i.width,i.height),o.addCamera(p),o.update(),(y=new Zt(h)).loadAtlas("./main-char.atlas"),y.loadAtlas("./ground.atlas"),y.loadAtlas("./object.atlas"),["bg","city_01","city_02","cloud_01","cloud_02","smoke_01","smoke_02"].map((function(e){return y.loadTexture("./background/".concat(e,".png"))})),y.loadAtlas("./ui.atlas"),y.loadFont("./score.fnt"),n.innerHTML="Loading...",e.next=20,y.finishLoading();case 20:j=function(){var e=new c.b2World({x:0,y:b.GRAVITY}),a=new l.World,i=new Ut,r=new s.d(0,0);return o.getCamera().setPosition(0,0),a.register("context",h),a.register("physicsWorld",e),a.register("viewport",o),a.register("blocks",[]),a.register("stars",[]),a.register("aliens",[]),a.register("playerPosition",r),a.register("inputHandler",u),a.register("assetManager",y),a.register("playerState",i),a.register("fixedCamera",p),a.register("eventEmitter",t),a.addSystem(new Bt),a.addSystem(new Nt),a.addSystem(new Kt),a.addSystem(new Xt),a.addSystem(new $t),a.addSystem(new Dt),a.addSystem(new Gt,!1),a.addSystem(new Jt,!1),a.addSystem(new Ft,!1),a.addSystem(new Qt,!1),a.addSystem(new ea,!1),a.addSystem(new Yt,!1),a.addSystem(new Vt,!1),a.addSystem(new ta,!1),a},O=j(),d=!1,t.addListener("gameOver",(function(){d=!0,O.dispose(),setTimeout((function(){O=j(),d=!1}),100)})),h.clearColor(0,0,0,1),v=Object(s.g)((function(e){h.clear(h.COLOR_BUFFER_BIT),O.setDelta(e),!d&&O.processActiveSystem(),O.processPassiveSystem()})),setInterval((function(){return n.innerHTML="FPS: ".concat(v.getFps())}),500);case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}},[[90,1,2]]]);
//# sourceMappingURL=main.dee1cd56.chunk.js.map